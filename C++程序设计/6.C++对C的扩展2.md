# 1 `const` 详解

## 1.1 `const` 修饰普通变量

**被修饰的对象是只读的**。

`const int a;` 中 `a` 的值是**只读**的 `int const a;`；

`const int *p;` 该语句表示指向整形常量的指针，它指向的值不能修改；

`int const *p;` 该语句与上一句相同，表示指向整形常量的指针，它指向的值不能修改；

` int* const p;` 该语句表示指向整形的常量指针，它不能再指向别的变量，但指向（变量）的值可以修改；

`const int* const p = &a;` 该语句表示指向整形变量的常量指针，它不能指向别的常量，指向的值不可以修改；

` int const* const p = &a;` 表示指向整形常量的常量指针。它既不能再指向别的常量，指向的值也不能修改。

## 1.2 `const` 修改成员变量

 `const` 修饰类的成员变量，表示成员常量，同时它只能在==初始化列表中赋值==。

```c++
class A {
 public:
  const int n_value;        // 成员变量不能被修改
  A(int x) : n_value(x) {}  // 只能在初始化列表中赋值
};
```

## 1.3 `const` 修饰类的成员函数

使用 `const` 修饰类的成员函数，该函数为类的**常成员函数，它不改变对象的成员变量。**

```c++
class B {
 public:
  int x;

 public:
  // error C3490: 由于正在通过常量对象访问“x”，因此无法对其进行修改
  void f() const { this->x++; }
};
```

**注意：普通的全局函数不能用 `const` 修饰。**

（下面这是错的……）

```c++
// “f”: 非成员函数上不允许修饰符
void f() const {}
```

`const` 的最大作用是增强代码的可读性，因为另一个程序员只能看到头文件。调试的时候可以减轻工作。

## 1.4 `const` 修饰对象

`const` 修饰的对象为常量对象，其中的任何成员都不能被修改；

`const` 修饰的对象只能访问类中的 `const` 函数；

`const` 修饰的对象可以访问 `public` 成员变量，但是不能够修改。

```cpp
#include <iostream>

using namespace std;

class C {
 public:
  int y;
  int getX() const { return x; }
  C() : x(100), y(1000) {}

 private:
  int x;
};

int main() {
  const C c;
  cout << c.y << endl;
  cout << c.getX() << endl;
  return 0;
}
```

## 1.5 `const` 修饰引用

```cpp
#include <iostream>
using namespace std;
// error C3892: “t”: 不能给常量赋值
void func(const int& t) { ++t; }
int main() {
  int x = 0;
  func(x);
  cout << x << endl;
  return 0;
}
```



