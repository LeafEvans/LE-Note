# Linux 系统整体结构

## Linux 系统整体结构的划分

Linux 系统可以简单划分为用户区和内核区。

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2025_03_10_17_33.png" alt="2025_03_10_17_33" style="zoom:15%;" />

之所以 Linux 系统要被划分为用户区、内核区，是因为进程是操作系统的执行单元，用户的一切操作是以进程为单元的。一个进程也可以被划分为用户区、内核区。

若进程不分区，用户可以轻易访问计算机的所有资源，那么数据的安全性，对硬件的保护将无从谈起。

1. 不分区意味着**所有数据对用户可见**，用户可以随意获取，毫无保密性。
2. 不分区意味着**用户可以直接操作硬件**，那么硬件的安全性将无法得到保障，很多硬件无法长期执行某些操作。
3. 不分区意味着非专业用户的操作**更容易损坏系统**。

**总结**：分区是必须的。让进程在用户区，则用户在执行时，就不能访问内核区的东西（因为操作系统的核心在内核区，只要用户不能任意修 改内核区，操作系统就不易损坏）。而当进程在内核区时，可以任意访问用户区与内核区。

而**进程的分区就是以操作系统的分区为前提的**，<span style="color:red">因此操作系统的分区是必须的</span>。

---

操作系统的分区与进程的分区类似（“进程用户区、内核区”与“操作系统用户区、内核区”有大致的对应关系），因为 Linux 是面向进程设计的操作系统，一切都要靠进程来运行。

进程是依靠指针寻址的。若为 32 位系统，其中一个进程就是 $2^{32}$Byte，一个 32 位的指针（指针的位数等于系统的位数，32 位系统就是 32 位的指针）刚好可以全部寻址。若为 64 位系统，那么一个进程就是 $2^{64}$Byte，一个 64 位的指针刚好寻址。

> **注意**：与其说指针可以寻址进程的全部地址，不如说是因为指针只有 32 位或 64 位，所以一个进程只能有 $2^{32}$ 或 $2^{64}$ 的大小，否则无法寻址。

堆内存的本质是需要时申请到的物理内存，而堆内存可以申请到指针无法寻址为止，也就是一个进程的上限。

之所以在早期的计算机中，500MB 的物理内存可以运行 4GB 的进程是因为一个进程启动时，代码区、栈区、动态库链接区等区域消耗的内存很小，堆内存只有需要时申请就可以了，加起来也不会达到 500MB。