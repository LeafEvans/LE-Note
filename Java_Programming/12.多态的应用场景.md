# 多态的应用场景

小动物们饿了，急需补充能量值恢复体力，但是不同动物吃的食物是不同的：狗需要吃骨头，猫需要吃猫粮。主人需要根据动物种类的不同，投喂不同的食物。请编写程序模拟该过程。

**设计类：**

- **父类：** `Pet`（抽象类）
- **子类：** `Dog`（属性：`name`, `power`；方法：`eat()`）
- **子类：** `Cat`（属性：`name`, `power`；方法：`eat()`）
- **主人类：** `Master`（方法：`feed()`）

---

### `Pet.java`

```java
package scu.test_2024_10_2.package_13_05;

public abstract class Pet {
    String name;
    int power;

    public abstract void eat(int num);
}
```

### `Cat.java`

```java
package scu.test_2024_10_2.package_13_05;

public class Cat extends Pet {

    public Cat() {}

    public Cat(String name, int power) {
        this.name = name;
        this.power = power;
    }

    @Override
    public void eat(int num) {
        this.power += num;
        System.out.println("猫 " + this.name
                + " 能量值增加了 " + num
                + "，最终的能量值为：" + this.power);
    }
}
```

### `Dog.java`

```java
package scu.test_2024_10_2.package_13_05;

public class Dog extends Pet {

    public Dog() {}

    public Dog(String name, int power) {
        this.name = name;
        this.power = power;
    }

    @Override
    public void eat(int num) {
        this.power += num;
        System.out.println("狗 " + this.name
                + " 能量值增加了 " + num
                + "，最终的能量值为：" + this.power);
    }
}
```

### `Master.java`

```java
package scu.test_2024_10_2.package_13_05;

public class Master {
    public void feed(Pet pet, int num) {
        pet.eat(num);
    }
}
```

### `T1.java`

```java
package scu.test_2024_10_2.package_13_05;

public class T1 {
    public static void main(String[] args) {
        Dog dog = new Dog("可乐", 100);
        Cat cat = new Cat("雪碧", 100);
        Master master = new Master();
        master.feed(dog, 30);
        master.feed(cat, 30);
    }
}
```

---

# 多态的定义

- **多态：** 同一种操作，由于条件不同，产生的结果也不同。
- **多态的代码理解：** 同一个引用类型，使用不同的实例而执行不同操作，也可以说，使用父类对象指向子类对象。

# Java 中的类型分类

- **基本类型：**
  - **整型：** `byte`、`short`、`int`、`long`
  - **浮点型：** `float`、`double`
  - **字符型：** `char`
  - **布尔型：** `boolean`
- **引用类型：** 字符串、数组、自定义类

类型的不同决定了在内存上占用空间的不同。基本类型都保存在栈上，引用类型在栈和堆上都有内容。

# 父类与子类的互相转换

1. **父类转成子类（向下转型）：**

   ```java
   Pet pet = new Dog();
   Dog dog = (Dog) pet;
   ```

2. **子类转父类（自动转换）：**

   ```java
   Dog dog = new Dog();
   Pet pet = dog; // 自动向上转型
   ```

3. **`instanceof` 关键字：**

   - 用于判断对象是否为某个类的实例：

     ```java
     if (pet instanceof Dog) {
         // pet 是 Dog 的实例
     }
     ```

# 向下转型调用子类特有的方法

```java
public void work(Pet pet) {
    if (pet instanceof Cat) {
        ((Cat) pet).catchMouse();
    } else if (pet instanceof Dog) {
        ((Dog) pet).seeDoor();
    }
}
```

### `Main.java`

```java
package scu.test_2024_10_2.package_13_45;

public class Main {
    public static void main(String[] args) {
        Dog dog = new Dog();
        Cat cat = new Cat();
        Master master = new Master();
        master.work(cat);
        master.work(dog);
    }
}
```

---

**案例：**

### `Main.java`

```java
package scu.test_2024_10_2.package_13_52;

public class Main {
    public static void main(String[] args) {
        Chinese chinese = new Chinese();
        American american = new American();
        Korean korean = new Korean();
        Person[] persons = new Person[3];
        persons[0] = chinese;
        persons[1] = american;
        persons[2] = korean;

        for (Person person : persons) {
            person.sayHello();
        }
    }
}
```

# 多态的价值

多态的终极价值就是为了 **统一调用**。

# 父类作为返回值实现多态

公园里，吹糖人的老爷爷可以根据顾客的要求，吹出不同形状的小动物。小明喜欢小狗，老爷爷可以吹出小狗；小红喜欢小猫，老爷爷可以吹出小猫；小亮喜欢小猪，老爷爷可以吹出小猪。编程模拟老爷爷根据顾客要求吹出不同形状小动物的这个过程。

### `Main.java`

```java
package scu.test_2024_10_2.package_14_10;

public class Main {
    public static void main(String[] args) {
        Grandpa grandpa = new Grandpa();
        String[] types = { "dog", "cat", "pig" };
        for (String type : types) {
            Animal animal = grandpa.blowSugarAnimal(type);
            animal.getShape();
        }
    }
}
```

![吹糖人](https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/image-20241002143601126.png)

# `Random` 类的使用

在 Java 中，`Random` 类用于生成伪随机数。你可以使用 `java.util.Random` 类来生成不同类型的随机数，例如整数、浮点数、布尔值等。

### 导入 `Random` 类

```java
import java.util.Random;
```

### 创建 `Random` 对象

你可以通过无参构造函数创建一个 `Random` 对象，或者通过传递一个种子（seed）来创建一个带有固定种子的 `Random` 对象。

```java
Random random = new Random(); // 无种子，使用系统时间作为种子
// 或者
Random seededRandom = new Random(12345); // 使用特定种子
```

### 生成随机数

#### 生成随机整数

```java
int randomInt = random.nextInt(); // 生成一个随机整数
int randomIntInRange = random.nextInt(100); // 生成 0 到 99 之间的随机整数
```

#### 生成随机浮点数

```java
float randomFloat = random.nextFloat(); // 生成 0.0 到 1.0 之间的随机浮点数
double randomDouble = random.nextDouble(); // 生成 0.0 到 1.0 之间的随机双精度浮点数
```

#### 生成随机布尔值

```java
boolean randomBoolean = random.nextBoolean(); // 生成随机布尔值
```

#### 生成随机长整型

```java
long randomLong = random.nextLong(); // 生成一个随机长整型
```

---

# 多态的总结

通过以上示例，我们可以看到多态在 Java 编程中的重要性。它不仅使代码更加灵活和可扩展，还提高了代码的可维护性。理解并正确运用多态，将有助于我们编写出更高质量的面向对象程序。
