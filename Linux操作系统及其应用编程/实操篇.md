 **shell**可以看作是一个命令解释器，为我们提供了交互式的文本控制台界面。

我们可以通过终端控制台来输入命令，由**shell**进行解释并最终交给内核执行。

本章就将分类介绍常用的基本**shell**命令。

# 一、帮助命令
## （1）man获得帮助信息
### 1.基本语法
```
man [命令或配置文件] （功能描述：获得帮助信息）
```

### 2.显示说明
<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fc0dcd70223d4802d8e80dc1e7476664d--9ad2--image-20231029105126598.png" alt="image-20231029105126598" style="zoom:80%;" />

### 3.案例实操
<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fba95b76e639368524d2971a1bf5ab9b3--6ca1--image-20231029105146302.png" alt="image-20231029105146302" style="zoom:80%;" />

## （2）help获得shell内置命令的帮助信息

一部分基础功能的系统命令是直接内嵌在shell中的，系统加载启动之后会随着shell一起加载，常驻系统内存中。

这部分命令被称为"内置（**built-in**）命令"；相应的其它命令被称为"外部命令"。

用`type`命令就可以查询当前的命令类型。

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F6634816c962c4026aa2538ff22babff3--3d1f--1697678509589-c1aae8db-ee2c-47f9-b277-d1f8f34844df.png" alt="image.png" style="zoom:80%;" />

想要查看，可先使用`man -f`命令来显示。

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fecd0808bb960fffb64182a5365a3f5fb--5524--1697678744670-4f843075-586d-4470-a163-a5d41bbbbaba.png" alt="image.png" style="zoom:80%;" />

可知所要查询的命令，而后输入`man 1p cd`（cd为要查询的命令，1p为相应的章节）来查看帮助信息。

除此之外，可输入`ls --help`命令来查看外部命令（展示例子为`ls`）的简洁信息。

### 1.基本命令
```
help 命令 (功能描述：获得shell内置命令的帮助信息)
```

### 2.案例实操
<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F375710391a9446a0e9dd5d52956b3b05--7049--1697678136561-f2e00820-357b-425c-8f37-b13b744f74fe.png" alt="image.png" style="zoom:80%;" />

## （3）常用快捷键
<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F035ba48507192f43223016104260a8ab--a3ff--image-20231029105214091.png" alt="image-20231029105214091" style="zoom:80%;" />

# 二、文件目录类
## （1）pwd显示当前文件目录的绝对路径
> pwd： Print Working Directory 打印工作目录

### 1.基本语法
```
pwd （功能描述：显示当前工作目录的绝对路径）
```

### 2.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F0cdd069db45c09a5345248342775ba0a--b1b5--1697679663669-0e88e04f-fe8f-4b17-8bb3-6511ef706e42.png" alt="image.png" style="zoom:80%;" />

## （2）cd切换目录
> cd：Change Directory 切换路径

### 1.基本语法
```
cd [参数]
```

### 2.参数说明
<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F4a19f19ad13170abd75e069b0a07da9c--bbb9--1697680315797-83e81d9b-aba3-4263-9bf5-29a3021c5f43.png" alt="image.png" style="zoom:80%;" />

### 3.案例实操
<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F7b51d506f0cd34d6f2124670a078bb2b--f005--1697680346709-4b6f2030-448a-4091-a33a-f46b032a9f36.png" alt="image.png" style="zoom:80%;" />

以`/`开头代表以根目录为基准点来触发。

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fc670f5c8a5c44837772884e450302514--92e3--1697680726423-b21e9ce7-eacd-49e0-be20-c1374a2ef611.png" alt="image.png" style="zoom:80%;" />

从桌面开始，退回到上一级目录，然后再进入。

## (3)ls列出目录的内容
> ls：list列出目录内容

### 1.基本语法
```
ls [选项] [目录或是文件]
```

### 2.选项说明
<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Faff51e0ac3368ae3f0b762b38f8ee122--be9d--1697682970730-4e429ee8-1e14-43b4-8bbc-68e6bf5881b3.png" alt="image.png" style="zoom:80%;" />

- -i 显示文件的inode信息

  可以通过`-al`来连续执行两个命令。

- -h 显示文件的占用情况

  <img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-28%2F1d060bc32a48b3d00881bb059ddd8b36--201c--image-20231128084429766.png" alt="image-20231128084429766" style="zoom:80%;" />

  但是，可以看到目录只占了4.0k这样的大小，因为它计算的是文件夹的大小，而没有计算文件夹内部文件的大小。

### 3.显示说明

>
> 每行列出的信息依次是：文件类型与权限 链接数 文件属主 文件属组 文件大小用byte来表示 
>
> 建立或最近修改的时间 名字

上述信息也被称作**i-node**信息（i代表节点号）。

### 4.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fce8257b3cdfbb638377f8c91e1f147e4--06b6--1697683911419-68c2add9-27d2-404d-aa26-e1b5b137e585.png" alt="image.png" style="zoom:80%;" />

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F84eaa468824d1435c1574b87aff69989--de56--1697683939776-f2e6d4d6-d7ff-4a8d-8c42-500bbc898da0.png" alt="image.png" style="zoom:80%;" />

## （4）mkdir创建新的文件夹
> mkdir：Make Directory 建立目录

### 1.基本语法
```
mkdir [选项] 要创建的目录
```

### 2.选项说明
<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fb24cc9a22c5337d33b5e58e539cdcc98--f9a9--1697684470907-06ae3b0f-4e42-455d-a447-199bd56a62f4.png" alt="image.png" style="zoom:80%;" />

### 3.案例实操
#### a.创建一个目录
<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Faff272a767b293daf1c0a47f09f024fb--2b09--1697684506341-5db1ad3a-677d-49df-a58a-3cddbffc732d.png" alt="image.png" style="zoom:80%;" />

#### b.创建一个多级目录
法一：`mkdir d d/e d/e/f`

法二：`mkdir -p xiyou/dssz/meihouwang`

```
-p --parents （为所给出的目录建立丢失了的父目录）
```

## （5）rmdir删除一个空的目录
> rmdir：Remove directory 移除目录

### 1.基本语法
```
rmdir 要删除的空目录
```

### 2.案例实操
<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F187717e8fa6761d4c28a72384210966a--0406--1697684680812-421cfeba-cb75-4d93-9136-a93fdc39a8c7.png" alt="image.png" style="zoom:80%;" />

删除一个多级目录与创建类似，加上`-p`。

## （6）touch创建空文件
### 1.基本语法
```
touch 文件名称
```

### 2.案例实操
<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F29ca5896e96dff57adda4629f433afe9--15e3--1697685891761-d2cbb603-6308-4bff-8a28-9b9d49dc0db2.png" alt="image.png" style="zoom:80%;" />

## （7）cp复制文件或目录
### 1.基本语法
```
cp [选项] sourcedest （功能描述：复制source文件到dest）
```

如果**dest**是文件名，那就是对**dest**文件进行覆盖。

### 2.选项说明
<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F37e5ec44fbeadadaf0c3cd0059ddaa4e--3d5c--1697685812241-0c640a30-b3f6-4111-89c2-5059f3bfd612.png" alt="image.png" style="zoom:80%;" />

**r**的意思**recursion**，代表递归的意思，在复制文件夹时，要把里面的文件和文件夹通过层层递归的方式来进行复制。

### 3.参数说明
<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F3714f3e4ce63592a76660eae43a8c256--0ff7--1697686654222-7615c66a-a048-4130-be06-f79c988e94aa.png" alt="image.png" style="zoom:80%;" />

### 4.经验技巧
强制覆盖不提示的方法：`\cp`

反斜杠代表执行原生代码。<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fbabf76eddde0f3c1019fbccdc2160477--b9b4--1697705760024-9e4ade4f-dd9d-49ff-be59-a40842ee6ee3.png" alt="image.png" style="zoom:80%;" />

通过`alias`，即可查看相关命令的别名和原生命令。

### 5.案例实操
<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F96b838af88a2e1c6c97694def7ef11bb--d504--1697706277009-4ea79b38-7b72-4843-8c7c-96b7a5c76483.png" alt="image.png" style="zoom:80%;" />

## （8）rm删除文件或目录
### 1.基本语法
```
rm [选项] deletefile （功能描述：递归删除目录中所有内容）
```

### 2.选项说明
<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fe80d8b943a3ea666ef1c4eef5c488dc3--f175--1697706367873-85a358e0-39b8-4d89-ad4b-8a474cbb0d39.png" alt="image.png" style="zoom:80%;" />

可通过连续两个选项，如`-rf`，来做两个操作。

```
[root@hadoop100 atguigu]# rm -f ./*
```

如果要删除**atguigu**目录下的所有内容，用上述命令，`./*`中`./`代表当前目录，`*`代表该目录下的全部文件。

### 3.案例实操
<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fbff68ce47c40cdfc7ba96895a77b3715--4465--1697707028413-db315a4b-8f78-4129-a7b3-ac841973c703.png" alt="image.png" style="zoom:80%;" />

## （9）mv移动文件与目录或重命名
### 1.基本语法
```c
(1) mv oldNameFile newNameFile （功能描述：重命名）
(2) mv /temp/movefile /targetFolder （功能描述：移动文件）
```
### 2.案例实操
<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fad5a4450376e60dc88984d43e07ee280--4099--1697707125943-1d2600d4-a886-42e8-8a1d-7e9fc4461be2.png" alt="image.png" style="zoom:80%;" />

## （10）cat查看文件内容
查看文件内容，从第一行开始显示。

> cat：catch
>

### 1.基本语法
```
cat [选项] 要查看的文件
```

### 2.选项说明
<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fa8bebd258e3ebb080d2b369433c7f18e--c825--1697707494498-bec3a717-964f-4291-a9fc-db3c9a8f90ce.png" alt="image.png" style="zoom:80%;" />

### 3.经验技巧
一般查看比较小的文件，一屏幕能显示全的。
### 4.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F16bb99af42c701e1d58b631c703d0811--2295--1697707548073-518ed84e-eccf-4808-80a6-f4f1da14824a.png" alt="image.png" style="zoom:80%;" />

另外，使用`cat a b`表示同时显示两个文件的内容，而`cat a b > ab`表示将两个文件显示的内容同时覆写到一个文件（如果没有，会创建一个相应的新文件），`cat a b >> ab `就是添加两个文件的内容到相应文件的末尾。

## （11）more文件内容分屏查看器
`more`指令是一个基于vi编辑器的文本过滤器，它以全屏幕的方式按页显示文件的内容。`more`指令中内置了若干快捷键，详见操作说明。

### 1.基本语法
```
more 要查看的文件
```

### 2.操作说明
<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F7fd82f81f5aab029aa13d7d0345a73e7--0571--1697707899896-db4c3d1c-a03e-453c-b57e-e1499bd5453c.png" alt="image.png" style="zoom:80%;" />

## （12）less分屏显示文件内容
`less`指令用来分屏查看文件内容，它的功能与`more`指令类似，但是比`more`指令更加强大，支持各种显示终端。`less`指令在显示文件内容时，并不是一次将整个文件加载之后才显示，而是根据显示需要加载内容，对于显示大型文件具有较高的效率。

### 1.基本语法
```
less 要查看的文件
```

### 2.操作说明
<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F274fec2637e3516f9224d453f32d8d18--ab17--1697708650613-b5f6bc19-c1e7-4766-85e5-4db4f732dbb0.png" alt="image.png" style="zoom:80%;" />

### 3.经验技巧
用SecureCRT时，[pagedown]和[pageup]可能会出现无法识别的问题。
### 4.案例实操
<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fcba3a6537394f46d135c2926dbe077fa--ce46--1697708818009-57cfa34a-2c6a-489d-b5ae-5d03ede22963.png" alt="image.png" style="zoom:80%;" />

## （13）echo

`echo`输出命令到控制台。

### 1.基本语法

```
echo [选项] [输出内容]
```

选项：

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fbcbbddf8cd3e9ccde9e05d3deb5d6210--8cc2--image-20231026083346444.png" alt="image-20231026083346444" style="zoom:80%;" />

类似的转义字符如`\"`，与C语言中类似。

### 2.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F4f32105610fe754a9b8b3985b99a07e2--1569--image-20231026083435105.png" alt="image-20231026083435105" style="zoom:80%;" />

可以看到输入的字符串最好带上双引号，也可以不带双引号。

## (14)>输入重定向和>>追加

### 1.基本语法

```
ls -l>文件 （功能描述：列表的内容写入文件a.txt中（覆盖写））
ls -al>>文件 （功能描述：将列表的内容追加到a.txt的末尾）
cat 文件1> 件2 （功能描述：将文件1的内容覆盖到文件2）
echo “内容”>>“文件”
```

其中，`echo $[变量名]`可以查询环境变量，如果不知道要查看哪个，按[tab]键，即可列出。

此时，也可以执行上述第四个命令，会将当前的环境变量追加到文件中。

### 2.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F951189901523b8c49466442ea0799996--a173--image-20231026084730752.png" alt="image-20231026084730752" style="zoom:80%;" />

## （15）head显示文件头部内容

`head`用于显示文件开头部分内容，默认情况下`head`指令显示文件的前10行内容。

### 1.基本语法

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fbebe4d18632cb40f3348fa67d1aa2800--c713--image-20231026090446475.png" alt="image-20231026090446475" style="zoom:80%;" />

### 2.选项说明

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F3f9d1b343021ba8abf43956a38db55f6--e922--image-20231026090511046.png" alt="image-20231026090511046" style="zoom:80%;" />

### 3.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fb5fe122b0fa13c61816472bae6e0ea8f--021b--image-20231026090534444.png" alt="image-20231026090534444" style="zoom:80%;" />

## （16）tail输出文件尾部内容

`tail`用于输出文件中尾部的内容，默认情况下`tail`指令显示文件的后10行内容。

### 1.基本语法

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fdc5a2bea5c0e20e9da9e36e55ec0daec--7a04--image-20231026090807335.png" alt="image-20231026090807335" style="zoom:80%;" />

按[ctrl]+[s]会将监视暂停，按[ctrl]+[q]会将监视重启。

需要注意的是在Linux操作系统中，vim编辑器所编辑的和保存的内容不会再监视中显示，因为当文件保存时，索引号会发生改变，而`tail -f`这个命令是通过索引号来实时追踪的。

可以通过`ls -i [文件名]`来查看索引号。

### 2.选项说明

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F236035baa09aebf70d244c1ddd4460ca--7564--image-20231026091039988.png" alt="image-20231026091039988" style="zoom:80%;" />

## （17）ln软链接

软链接也称符号链接，类似于Windows里的快捷方式，有自己的数据块，主要存放了链接其他文件的路径。

### 1.基本语法

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fc7734e9ca9694712144cd72b7f74b2a3--8744--image-20231026092923988.png" alt="image-20231026092923988" style="zoom:80%;" />

`pwd`显示的是软链接的路径，因此`pwd -P`就可以显示实际物理路径。

### 2.经验技巧

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F6d34226967dd52ca36eece51c7964083--9357--image-20231026092947146.png" alt="image-20231026092947146" style="zoom:80%;" />

### 3.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fd12fb32d92f46c838bd94a396315a0bf--80fa--image-20231026093013900.png" alt="image-20231026093013900" style="zoom:80%;" />

## （18）ln硬链接

硬链接相当于当前文件多了一个指向的链接；而软链接是单独创建了一个链接文件指向了当前文件。每个文件都有相应的i-node的信息（也就是metadata（元数据）），这里面有当前文件的索引节点号。而硬链接相当于创建了一个指向**i-node**信息的链接，然后再链接原文件，与原来原文件的链接不冲突。链接数与硬链接有关，而且不能创建目录的硬链接。

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F1839d8aa767b9fd43b4ec060ba1a6c41--82db--image-20231026110308323.png" alt="image-20231026110308323" style="zoom: 67%;" />

硬链接与原文件的地位平等，因此删了原文件也可以，而软链接则不行，因为：

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fa1810e489d26ccb9de8d313b5cd77ba2--deb2--image-20231026110935507.png" alt="image-20231026110935507" style="zoom: 67%;" />

软链接是一个文件，它也有自己的**i-node**，而数据块中存储的是原文件的地址。

### 1.基本语法

```
ln [文件] [链接]
```

## （19）history查看已经执行过的历史命令

### 1.基本语法

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F276866f2352c63173f230ec76a244e10--7f92--image-20231026111215619.png" alt="image-20231026111215619" style="zoom:80%;" />

### 2.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fe34b37e98e5441501157ca47dcf9c929--3d3c--image-20231026111508152.png" alt="image-20231026111508152" style="zoom:80%;" />

比如`history 10`，可以显示最新执行的10条命令。此后，可以通过`!n`(n代表相应的第n条命令的行号，可以用`history`看到)，这个命令来执行之前的那条命令。

```
history -c
```

上面这条命令可以清除历史记录。

## （20）sort

`sort`可针对文本文件的内容，以行为单位来排序。

### 1.基本语法

```shell
sort [-bcdfimMnr][-o<输出文件>][-t<分隔字符>][+<起始栏位>-<结束栏位>][--help][--verison][文件][-k field1[,field2]]
```

### 2.选项说明

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fcf46981e6d1f3e1e80934a241534b853--1541--image-20231109113456300.png" alt="image-20231109113456300" style="zoom:80%;" />

### 3.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F651bb6a62254f5f4207d3d6e9305244d--fc68--image-20231109113525631.png" alt="image-20231109113525631" style="zoom:80%;" />

# 三、时间日期类

### 1.基本语法

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F6c08edfffb93efeb804efdab011ea255--6c5c--image-20231026112515903.png" alt="image-20231026112515903" style="zoom:80%;" />

### 2.选项说明

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F0c0fcdf4176d08286b1fd5951bdd5630--6bf0--image-20231026112557799.png" alt="image-20231026112557799" style="zoom:80%;" />

### 3.参数说明

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F30754cabbf261ecd833b10f1f6fe2114--cd5e--image-20231026112630884.png" alt="image-20231026112630884" style="zoom:80%;" />

## （1）date显示当前时间

### 1.基本语法

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F0c30bf91cf354e429aa4ccbe410d0613--55fb--image-20231026112751454.png" alt="image-20231026112751454" style="zoom:80%;" />

命令`date +%y`显示年份后两位的内容。

命令`date +%s`显示的是时间戳。

`""`代表字符串。

这种`%`代表转义字符，与C语言中类似。

### 2.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F139e923e4a07265a56d33c057f3daad3--cc0f--image-20231026115253240.png" alt="image-20231026115253240" style="zoom:80%;" />

## （2）date显示非当前时间

### 1.基本语法

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F907afe58557d3aa0782b413ecfa1e246--af88--image-20231026123344031.png" alt="image-20231026123344031" style="zoom:80%;" />

### 2.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fb6bb9710813aea0900dd76e9e52d5f63--1b14--image-20231026123415972.png" alt="image-20231026123415972" style="zoom:80%;" />

其中，`days`和`1`或者`-1`可以换成其他的单位和数值，如`hours`之类的。

## （3）date设置系统时间

### 1.基本语法

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fcf24606ee98f605d4dc7005c79237206--7da9--image-20231026124027803.png" alt="image-20231026124027803" style="zoom:80%;" />

### 2.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fd8693e8a886445da3d25af44aa9bfa8d--d95f--image-20231026124057055.png" alt="image-20231026124057055" style="zoom:80%;" />

也可只输入日期或时间来进行操作，只输入日期时，后面默认跟的时间从0开始。

若要恢复现在时间，输入：

```
ntpdate -u cn.pool.ntp.org
```

其中`cn.pool.ntp.org`是中国开源免费NTP服务器，也可换成其他NTP服务器。

## （4）cal查看日历

### 1.基本语法

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F3fd1ad6c9b71a3633ece51293f7eec4f--7d6d--image-20231026125725823.png" alt="image-20231026125725823" style="zoom:80%;" />

> cal：calendar
>

### 2.选项说明

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Ffd3273100d65dd64c1819626b68ce759--ebc4--image-20231026125749697.png" alt="image-20231026125749697" style="zoom:80%;" />

### 3.案例说明

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Ff3468ec803878fc37c1cba18f1371b89--e268--image-20231026125810437.png" alt="image-20231026125810437" style="zoom:80%;" />

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F03b5a6386f45a2dd2d6da6b46f782dc0--b5cb--image-20231026130211016.png" alt="image-20231026130211016" style="zoom:80%;" />

# 四、用户管理

## （1）useradd添加新用户

### 1.基本语法

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fa508462fae07c96328a60fb04574b623--0e55--image-20231026131545623.png" alt="image-20231026131545623" style="zoom:80%;" />

如果没加`-g`就默认创建一个与用户名相同的组名的组。

### 2.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F26f06c1dc51c0b1045238590fee7e612--a9e2--image-20231026131617490.png" alt="image-20231026131617490" style="zoom:80%;" />

```shell
useradd -d /home/dave davit
```

当前的用户名叫做**davit**，但主文件夹名称不同。登录的时候也是这个用户名，但是这个用户的主目录是在**dave**目录下面的。

同样的，直接修改用户主目录的名称，用户名没有改变。多个用户可以在Xshell上进行远程登录。

## （2）passwd设置用户密码

### 1.基本语法

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fad6b50fe6635ed46e370ae9f92638b50--a982--image-20231029110420934.png" alt="image-20231029110420934" style="zoom:80%;" />

### 2.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F13ea9761c1ddc4f866dcae9a14cb9f85--1dca--image-20231029110509748.png" alt="image-20231029110509748" style="zoom:80%;" />

在**root**用户权限下，即使密码强度不够，输入两次密码后依旧可以修改密码。

## （3）id查看用户是否存在

### 1.基本语法

```shell
id 用户名
```

### 2.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F34be0c98b9913049f0eb20e0b9e4290a--bd81--image-20231029111434019.png" alt="image-20231029111434019" style="zoom:80%;" />

其中`uid`指的是**user id**（用户的id） ,而`gid`代表**group id**（组的id）。

## （4）cat /etc/passwd查看创建了哪些用户

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fcffc876cf3b94bf78d3729d3a2655a46--aa3f--image-20231029112147833.png" alt="image-20231029112147833" style="zoom:80%;" />

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F38559e04313aff51a45ecda2ee5a8b7f--9954--image-20231029112353050.png" alt="image-20231029112353050" style="zoom:80%;" />

里面有些用户名，被称作系统用户（也是伪用户），这些用户是被单独创建出来执行系统服务的。

## （5）su切换用户

> su：switch user
>

### 1.基本语法

```shell
su 用户名
```

### 2.案例实操

以root用户的身份跳转到普通用户不用密码，而普通用户之间切换、或切换到root用户，需要密码，而且不能随意查看他人的文件夹。

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F1ccb0eb3dd652b916475774f68cdda1a--814a--image-20231102103541860.png" alt="image-20231102103541860" style="zoom:80%;" />

想要切换为原来的用户，可以输入指令`exit`来退出。如图，输入指令退出LeafAlice对话，现在是LeafEvans对话，然后再跳就是root用户，以此类推。

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fc93c1bc5baa1aa736c9aab6bf17cfbcc--8e3e--image-20231102104154572.png" alt="image-20231102104154572" style="zoom:80%;" />

如图，这样就可以层层退出了。

## （6）who查看用户登录信息

### 1.基本语法

```shell
who am i （分开敲的话显示的最初始的对话用户，如上图就是root，最外层的用户）
whoami （连起来敲显示的就是当前对话的用户）
```

### 2.选项说明

- --version 显示版本信息
- -b 可以显示系统最新启动的时间

### 3.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F01598ba258bc6268a5e7ee46f4ae1fef--6b40--image-20231102104643818.png" alt="image-20231102104643818" style="zoom:80%;" />

## （7）sudo设置普通用户具有root权限

### 1.应用场景



<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fde1782413c3390ba94a13dd563b888f0--58d4--image-20231102104907519.png" alt="image-20231102104907519" style="zoom:80%;" />

可知`ls`命令无法执行，因为权限不够，此时要赋予普通用户root权限。

### 2.修改配置文件

直接执行`sudo`命令就会出现以下情况，虽然只要输入该用户的密码，由于没有被root用户授权而要使用`sudo`命令，所以失败。

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fdd31006ec88a6bb206df696b10f16a31--44f0--image-20231102104954095.png" alt="image-20231102104954095" style="zoom:80%;" />

因此要修改配置文件：

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F19d4b3fe3e22866b7747e04d91f9b144--a363--image-20231102111144889.png" alt="image-20231102111144889" style="zoom:80%;" />

可以看到：

<img src="C:\Users\31866\AppData\Roaming\Typora\typora-user-images\image-20231102111257908.png" alt="image-20231102111257908" style="zoom:80%;" />

这代表root可以再任何地方执行命令的权限。

修改为：

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fd212a0ce3bf97ca7b822bb65dd09f3ea--13a6--image-20231102111912300.png" alt="image-20231102111912300" style="zoom:80%;" />

此时，便可以：

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Ff66c7ff323df27fab232ef7dfd5cdf43--d7ef--image-20231102112543776.png" alt="image-20231102112543776" style="zoom:80%;" />

此外，注意：

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fe9e87f3163330c2e3061a050dfea02c9--5b42--image-20231102122729911.png" alt="image-20231102122729911" style="zoom:80%;" />

在配置文件中，这行说明代表在`wheel`组里的都可以执行`sudo`命令，`%`后面加组名就代表整个组。

以及：

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F117210ec1e5af92ee3ca8775ba9cbe45--9cdc--image-20231102123011459.png" alt="image-20231102123011459" style="zoom:80%;" />

这代表执行`sudo`命令时，不用输入密码。

## （8）userdel删除用户

### 1.基本语法

```shell
userdel leafevans （删除用户）
userdel -r leafevans （删除用户和它所在的主文件夹）
```

### 2.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fbffb40fddb75e9f1a2d2b86fd1411a45--670c--image-20231102113110186.png" alt="image-20231102113110186" style="zoom:80%;" />

## （9）usermod修改用户

### 1.基本语法

```shell
usermod -g 用户组 用户名
usermod -g OldName NewName
```

### 2.选项说明

| 选项 | 功能                                                |
| ---- | --------------------------------------------------- |
| -g   | 修改用户初始登录组，给定的组必须存在。默认组id是1。 |
| -n   | 表明给当前组重命名                                  |

### 3.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F126ff399730e250c1bd1f801a5f5b9ea--0b7d--image-20231102121731543.png" alt="image-20231102121731543" style="zoom:80%;" />

# 五、用户组管理命令

每个用户都有一个用户组，系统可以对一个用户组中的所有用户进行集中管理。

不同**Linux**系统对用户组的规定有所不同，如**LInux**下的用户属于与它同名的用户组，这个用户组在创建用户时同时创建。

用户组的管理涉及用户组的添加、删除和修改。组的增加、删除和修改实际上就是对**/etc/group**文件的更新。

每个用户可以同时加入不同的组。

## （1）groupadd新增组

### 1.基本语法

```
groupadd 组名
```

### 2.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F35eabdf8ee1201a4144afb09cc950d18--8c15--image-20231102114646459.png" alt="image-20231102114646459" style="zoom:80%;" />

## （2）groupdel删除组

### 1.基本语法

```shell
groupdel 组名
```

## （3）groupmod修改组

### 1.基本语法

```shell
groupmod 选项 用户组
```

### 2.选项说明

- -g GID 为用户组指定新的组标识号。
- -o 与 -g选项同时使用，用户组的新GID可以与系统已有用户组的GID相同。
- -n 新用户组 将用户组的名字改为新名字

### 3.案例实操

1. 实例1

   ```
   # groupmod -g 102 group2
   ```

   此命令将组group2的组标识号修改为102。

2. 实例2

   ```
   # groupmod –g 10000 -n group3 group2
   ```

   此命令将组group2的标识号改为10000，组名修改为group3。

# 六、文件权限类

## （1）文件属性

Linux系统是一种典型的多用户系统，不同的用户处于不同的地位，拥有不同的权限。为了保护系统的安全性，Linux系统对不同的用户访问同一文件（包括目录文件）的权限做了不同的规定。在Linux中我们可以使用`ll`或者`ls -l`命令来显示一个文件的属性以及文件所属的组。

### 1.从左到右的10个字符表示

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F8160fda1f923a89b6467376bd1d39759--a4d0--image-20231102124258682.png" alt="image-20231102124258682" style="zoom: 80%;" />

如果没有权限就会出现[-]而已。从左到右用0~9这些数字来表示。

1. 0首位代表类型

   在Linux中第一个字符代表这个文件是目录、文件或链接文件等等。

   - \- 代表文件
   - d 代表目录
   - l 代表链接文件（link file）；

2. 第1~3位确定属主（该文件的所有者）拥有该文件的权限。 --User

3. 第4~6位确定属组（所有者的同组用户）拥有该文件的权限。--Group

4. 第7~9位确定其他用户拥有该文件的权限。--Other

### 2.rxw作用文件和目录的不同解释

1. 作用到文件：

   [r]代表可读（read）：读取，查看。

   [w]代表可写（write）：可以修改，但是不代表可以删除该文件，删除一个文件的前提是对该文件所在的目录有写权限，才能删除该文件。

2. 作用到目录：

   [r]代表可读（read）：读取，ls查看目录内容。

   [w]代表可写（write）：可以修改，目录内创建+删除+重命名目录。

   [x]代表可执行程序（execute）：可以进入该目录。

### 3.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F63456296841a5ec72e275f0321e6e29d--ff93--image-20231102132705417.png" alt="image-20231102132705417" style="zoom: 80%;" />

每个目录都有链接数，它代表每个文件的子目录。

## （2）chmod修改权限

> chmod：change mod
>

### 1.基本语法

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fdac6b69c14d5e930519a3c6d75ddaa22--d4c7--image-20231104171327678.png" alt="image-20231104171327678" style="zoom:67%;" />

- ```
  chmod [{ugoa}{+-=}{rwx}] 文件或目录
  ```

- ```bash
  chmod [mode=421] [文件或目录]
  ```

### 2.经验技巧

u：所有者；g：所有组；o：其他人；a：所有人（u、g、o的总和）

```shell
r = 4;w = 2;x = 1;
rwx = 4 + 2 + 1 = 7
```

### 3.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F22d830d5943fa5c697b0fa3ae98ba2e8--db48--image-20231104173731904.png" alt="image-20231104173731904" style="zoom: 80%;" />

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fc7787ee27476ce20542644af49ff5866--1fab--image-20231104173856660.png" alt="image-20231104173856660" style="zoom: 80%;" />

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F7c0ac189e489f28a29fcf3786e6302d6--0968--image-20231104174030062.png" alt="image-20231104174030062" style="zoom: 80%;" />

## （3）chown改变所有者

### 1.基本语法

```
chown [选项] [最终用户] [文件或目录] （功能描述：改变文件或目录的所有者）
```

### 2.选项说明

| 选项 | 功能     |
| ---- | -------- |
| -R   | 递归操作 |

### 3.案例实操

## （4）chgrp改变所属组

### 1.基本语法

```bash
chgrp [最终用户组] [文件或目录] （功能描述：改变文件或者目录的所属组）
```

### 2.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F10ff3097ed9c48951ee6c79c649ae4d5--1d40--image-20231104175101717.png" alt="image-20231104175101717" style="zoom: 80%;" />

改变的组不一定是属主所在的组。

# 七、搜索查找类

## （1）find查找文件或目录

`find`指令将从指定目录向下递归地遍历各个子目录，将满足条件的文件显示在终端。

### 1.基本语法

```
find [搜索范围] [选项]
```

### 2.选项说明

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F63d330d69b6f39f469fcf488cf077210--7418--image-20231109084203017.png" alt="image-20231109084203017" style="zoom:80%;" />

### 3.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F5f2d40241dd5e208c36c82630583cc0e--0ad4--image-20231109084903171.png" alt="image-20231109084903171" style="zoom: 80%;" />

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fc7c834f0c2867dde4ab4e875363315c0--3a34--image-20231109085013171.png" alt="image-20231109085013171" style="zoom:80%;" />

`"*.cfg"`可以显示该目录下的所有后缀为`.cdg`的文件，`*`代表所有文件，`""`代表这个字符串当成一个整体运行。

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F758e2f2c08b2cf35be4f55c8214559e3--2911--image-20231109091014006.png" alt="image-20231109091014006" style="zoom:80%;" />

显示当前用户创建的文件。

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F2d126971641839c473981be1a3ea4133--6e29--image-20231109091223442.png" alt="image-20231109091223442" style="zoom:80%;" />

`+`代表大于，`-`代表小于。

## （2）locate快速定位文件路径

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F1904f448cd5e431e3d594db883526243--d5cc--image-20231109091357119.png" alt="image-20231109091357119" style="zoom:80%;" />

### 1.基本语法

```
locate [搜索文件]
```

### 2.经验技巧

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F618f0c8ebda4a4821182d19a134d7685--7bfb--image-20231109091514072.png" alt="image-20231109091514072" style="zoom:80%;" />

### 3.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F74d4999ed57e5e7ac4ca85e45c50db95--9948--image-20231109091554079.png" alt="image-20231109091554079" style="zoom:80%;" />

扩展：对于Linux系统中的命令，也可以做定位。

```
which [命令]
whereis [命令]
```

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fa7d2f17fa7384632d5a71e32a86a7009--4827--image-20231109092122713.png" alt="image-20231109092122713" style="zoom:67%;" />

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Ff843756fa79087a1f200b94b1775b0d2--6812--image-20231109092256465.png" alt="image-20231109092256465" style="zoom:80%;" />

## （3）grep过滤查找及“|”管道符

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fa30cc24a227883cabf655bb6b0ecfd5c--ffb8--image-20231109092420113.png" alt="image-20231109092420113" style="zoom:80%;" />

### 1.基本语法

```
grep 选项 查找内容 源文件
```

### 2.选项说明

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F89d02596742cb127587c6e78b313c4da--92ae--image-20231109092520590.png" alt="image-20231109092520590" style="zoom:80%;" />

- -i 忽略大小写
- -c 只打印匹配的行数
- -v 显示不包含匹配文本的所有行

### 3.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F1af9c36f16a359507fc6b02d29d678f2--16ac--image-20231109092550275.png" alt="image-20231109092550275" style="zoom:80%;" />

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F4cb2522b173c4520dae3f167b9e9102a--4ffa--image-20231109093127816.png" alt="image-20231109093127816" style="zoom:80%;" />

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F1be2fe634013b58fdf2c478856aecfce--96ee--image-20231109093344479.png" alt="image-20231109093344479" style="zoom:80%;" />

扩展：

> wc：word count

```
wc word count
```

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F8d90369658713c4b11dc440927e95085--f08b--image-20231109093733628.png" alt="image-20231109093733628" style="zoom:80%;" />

**71**代表行，**172**代表172个单词（以空格划分），**1916**代表当前文件的字节数。

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Ff04168f9b7299915d5e314ff10722250--a4bc--image-20231109094723093.png" alt="image-20231109094723093" style="zoom:80%;" />

两个结合后，显示的是`boot`的有8行，有32个词，这8行一共有344个字节。

# 八、压缩和解压类

## （1）gzip/gunzip压缩

### 1.基本语法

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F5d3eafc52d1f951d1dc217e33b0a114d--73aa--image-20231109095258761.png" alt="image-20231109095258761" style="zoom:80%;" />

### 2.经验技巧

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F5a6ea5b7e194f106e2b0804cd3dad9df--0290--image-20231109095348519.png" alt="image-20231109095348519" style="zoom:80%;" />

### 3.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F0f4b42d8b6c666eea8248cfea1c40bff--7f52--image-20231109095900778.png" alt="image-20231109095900778" style="zoom:80%;" />

## （2）zip/unzip压缩

### 1.基本语法

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F1010b89c4ff245d2fa26629e6c78268b--dd97--image-20231109101001740.png" alt="image-20231109101001740" style="zoom:80%;" />

### 2.选项说明

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fbe07fc205d77874b1de904ce1997b380--428c--image-20231109101644773.png" alt="image-20231109101644773" style="zoom:80%;" />

### 3.经验技巧

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F1f54c37e010c441f3f65d373dd00f120--6d78--image-20231109101819547.png" alt="image-20231109101819547" style="zoom:80%;" />

### 4.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fbdb6f1666ff053665aa4ec6cd85075e0--f7b0--image-20231109104305355.png" alt="image-20231109104305355" style="zoom:80%;" />

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F75bbdfa4f5710ffba07f1693aeaaa29d--16a6--image-20231109104429732.png" alt="image-20231109104429732" style="zoom:80%;" />

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Ffacb1a4369a703e3fcaafe7eaf92f1d8--4f8f--image-20231109104454934.png" alt="image-20231109104454934" style="zoom:80%;" />

## （3）tar打包

### 1.基本语法

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F721c82a585b5597d515c05975c332254--6eda--image-20231109105614797.png" alt="image-20231109105614797" style="zoom:80%;" />

### 2.选项说明

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Ff82bdbda358c4b8f384b1ae0be85a464--22fa--image-20231109105639238.png" alt="image-20231109105639238" style="zoom:80%;" />

### 3.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Fee0c99122b97a14942a84fea8c0e8ec0--aa48--image-20231109111854625.png" alt="image-20231109111854625" style="zoom:80%;" />

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2Ff8f0f7cb45083dec3437965e0f1cd03f--a4b3--image-20231109111613574.png" alt="image-20231109111613574" style="zoom:80%;" />

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-23%2F30fcb66bdf29fde363a64a13a833669b--0d65--image-20231109112342534.png" alt="image-20231109112342534" style="zoom:80%;" />

# 九、磁盘查看和分区类

## （1）du查看文件和目录占用的磁盘空间

du：disk usage 磁盘占用情况

### 1.基本语法

```
du 目录/文件 （功能描述：显示目录下每个子目录的磁盘使用情况）
```

### 2.选项说明

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-28%2F89d41e84b0397d90fbfef5b86f4de894--3184--image-20231128083559141.png" alt="image-20231128083559141" style="zoom:80%;" />

### 3.案例实操

安装`tree`插件（使用`yum tree install`）后，可以以树状图的结构来显示目录：

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-28%2Fcf446d5bd4e8d4f6f8a2637523ba713c--93a7--image-20231128084054807.png" alt="image-20231128084054807" style="zoom:80%;" />

输入`du`命令后，在最后一行显示文件大小：

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-28%2F22c456edf4ec090253dd67e8b170a0d8--0ffc--image-20231128085907934.png" alt="image-20231128085907934" style="zoom:80%;" />

有了`-h`选项，更加符合人类的阅读习惯：

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-28%2Fac6c93c791cfeb51271769f16864f63f--a2d4--image-20231128090046602.png" alt="image-20231128090046602" style="zoom:80%;" />

加了`-s`：

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-28%2Fae530932825387c32f2dbefebb5e9bc3--a5c9--image-20231128090509965.png" alt="image-20231128090509965" style="zoom:80%;" />

输入`--max-depth=1`，有：

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-28%2F257c515e53eb20ce4bb31121ff926735--9eb5--image-20231128090630735.png" alt="image-20231128090630735" style="zoom:80%;" />

上面这个代表显示第一层的子目录。

## （2）df查看磁盘空间使用情况

df：disk free 空余磁盘

### 1.基本语法

```
df 选项 （功能描述：列出文件系统的整体磁盘使用量，检查文件系统的磁盘空间占用情况）
```

### 2.选项说明

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-28%2F07b7ae30bf05ca5eed7f6a039c8a641e--6387--image-20231128091546840.png" alt="image-20231128091546840" style="zoom:80%;" />

### 3.案例说明

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-28%2Fc8b852eb8ee012f111659f8ac87423b2--68b1--image-20231128091651860.png" alt="image-20231128091651860" style="zoom:80%;" />

其中，`/dev/sda3`和`/dev/sda1`分别代表系统磁盘和引导分区，而上面的`tmpfs`代表**暂时文件系统**，比如`swap`分区和内存，它们分别都是4G，所以最后加起来就是8G。

有个简单的命令`free`，可以查看系统占用的情况：

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-28%2Fc917a2872d05cb0dc9d15209a43461b5--3fd8--image-20231128093143628.png" alt="image-20231128093143628" style="zoom:80%;" />

## （3）lsblk查看设备挂载情况

### 1.基本语法

```
lsblk （功能描述：查看设备挂载情况）
```

### 2.选项说明

| 选项 | 说明                                     |
| ---- | ---------------------------------------- |
| -f   | 查看详细的设备挂载情况，显示文件系统信息 |

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-28%2F9d525fe0b5f0d8e0ff0dd134c2b96e87--8b2e--image-20231128093654579.png" alt="image-20231128093654579" style="zoom:80%;" />

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-28%2F80712c6decf3cd855ba433e3cfaa89f2--c610--image-20231128094744675.png" alt="image-20231128094744675" style="zoom:80%;" />

sda1：引导分区；

sda2：交换分区；

sda3：剩下的磁盘空间；

sr0：光驱

## （4）mount/umount挂载/卸载

对于Linux用户来讲，不论有几个分区，分别分给哪一个目录使用，它总归就是一个根目录、一个独立且唯一的文件结构。

Linux中每个分区都是用来组成整个文件系统的一部分，它在用一种叫做“挂载”的处理方法，它整个文件系统中包含了一整套的文件和目录，并将一个分区和一个目录联系起来，要载入的那个分区将使它的存储空间在这个目录下获得。

### 1.基本语法

```bash
mount [-t vfstype][-o options] device dir （功能描述：挂载设备）
umount 设备文件名或挂载点 （功能描述：卸载设备）
```

### 2.选项说明

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-28%2F994e85b0238cbaa1c0e1ae05ead77f61--7407--image-20231128101018107.png" alt="image-20231128101018107" style="zoom:80%;" />

### 3.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-28%2F6c19f3d53408ab7fbcc20510126adef5--9e79--image-20231128101541460.png" alt="image-20231128101541460" style="zoom:80%;" />

## （5）fdisk分区

### 1.基本语法

```shell
fdisk -l （功能描述：查看磁盘分区情况）
fdisk 硬盘设备名 （功能描述：对新增硬盘进行分区操作）
```

### 2.选项说明

| 选项 | 功能                   |
| :--- | :--------------------- |
| -l   | 显示所有硬盘的分区列表 |

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-29%2F8f02102e14000876b0ec276562be2171--f1ad--image-20231129211248487.png" alt="image-20231129211248487" style="zoom:80%;" />

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-29%2F12bc5af5626676dfe04c8e0a77d0624c--7aa1--image-20231129214633788.png" alt="image-20231129214633788" style="zoom:80%;" />

### 3.经验技巧

该命令只有在root用户下才能使用

# 十、进程管理类

## （1）ps查看当前系统进程状态

ps：process status 进程状态

### 1.基本语法

```shell
px aux | grep xxx （功能描述：查看系统中所有进程）
px -ef | grep xxx （功能描述：可以查看子父进程之间的关系）
```

 <img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-30%2F30b6651f3faaf832752d34c790b0093c--1278--image-20231130114942977.png" alt="image-20231130114942977" style="zoom:80%;" />

直接使用`ps`命令只显示当前用户的调用的进程，以及跟当前终端控制台相关联的所有进程。

### 2.选项说明

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-30%2F070b7231ae3fe40bddc074191a4bc06e--a0b5--image-20231130124545039.png" alt="image-20231130124545039" style="zoom:80%;" />

### 3.功能说明

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-30%2F7789f9394f4591a782a706e8216dcb74--b3c0--image-20231130125104485.png" alt="image-20231130125104485"  />

后面加上`less`或`more`可以方便查阅。

![2023-11-30_d2b463203fbe5f9163bc508d4f3b609e--e878--image-20231130125546869](https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-12-14%2Fd2b463203fbe5f9163bc508d4f3b609e--c00b--2023-11-30_d2b463203fbe5f9163bc508d4f3b609e--e878--image-20231130125546869.png)

PID指的是当前进程的ID，PPID就是它的父进程的ID。（父进程就是启动当前进程的进程）

#### ①ps aux显示信息说明

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-30%2F143ea9e47f7e69d9faa355a3e6331676--6998--image-20231130130132041.png" alt="image-20231130130132041" style="zoom:80%;" />

STAT：`<`代表当前的进程有很高的优先级，`N`代表当前进程有比较低的优先级。

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-30%2Fe14c39a1aec36fd285af9d1e66ef4aaf--96ee--image-20231130132507452.png" alt="image-20231130132507452" style="zoom:80%;" />



<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-30%2F0485ff966ae82a797801ea4f69f4edcd--7f78--image-20231130131804064.png" alt="image-20231130131804064" style="zoom:80%;" />

物理内存没用完，就开始用虚拟内存的原因是在Linux操作系统中，有一套完整的机制，比如不常用的页面如果长时间不用的话，就将它置放在虚拟内存中，使用物理内存来进行更高效的使用。（置换页面）

#### ②ps -ef显示信息说明

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-30%2F7f635f586b58088aebcfee557806b255--5764--image-20231130170801038.png" alt="image-20231130170801038" style="zoom:80%;" />

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-30%2Fdae1ce7b46bc86c38143fc4aed2b4c1d--3477--image-20231130170840173.png" alt="image-20231130170840173" style="zoom:80%;" />

### 4.经验技巧

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-30%2F41b2d36a5ac1f08f1228ae6e5ef4db14--ad2f--image-20231130170926519.png" alt="image-20231130170926519" style="zoom:80%;" />

真实终端是tty，模拟终端和虚拟终端都是pts。

### 5.案例实操

使用ssh进行运程登录时，

可以看到再没有添加其他用户的新对话时：

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-30%2F6060eee893a3ae0a11e1cc31296e639d--47bd--image-20231130180931370.png" alt="image-20231130180931370" style="zoom:80%;" />

添加了root用户的新对话后：

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-30%2F90007dce7273bbdc94d8b1f7163c8959--a132--image-20231130181207574.png" alt="image-20231130181207574" style="zoom:80%;" />

可以看到多了一个远程登录的终端。（即pts/1）

在添加了其他用户的新对话后：

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-30%2F0f0bc4b7b51c460ceafb7b1c37f920eb--209d--image-20231130180903374.png" alt="image-20231130180903374" style="zoom:80%;" />

其中，`[priv]`那条代表的是权限分离。假如想要使用root权限去执行操作时，使用的就是它。可以使安全性得到保证。

## （2）kill终止进程

### 1.基本语法

```shell
kill [选项] 进程号 （功能描述：通过进程号杀死进程）
kill 进程名称 （功能描述：通过进程名称杀死进程，也支持通配符，这在系统因负载过大而变得很慢时很有用）
```

### 2.选项说明

| 选项 | 功能                 |
| ---- | -------------------- |
| -9   | 表示强迫进程立即停止 |

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-30%2Fd1745a20319ed40bf1c7f3a283279886--e367--image-20231130182137816.png" alt="image-20231130182137816" style="zoom:80%;" />

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-11-30%2F7d9849c80752dd50dc1c74450a052d69--aa3c--image-20231130183803112.png" alt="image-20231130183803112" style="zoom:80%;" />

`killall`可以杀死指定的所有进程，如上图，`sshd`进程。

## （3）pstree查看进程树

### 1.基本语法

```bash
pstree [选项]
```

### 2.选项说明

| 选项 | 功能               |
| ---- | ------------------ |
| -p   | 显示进程的PID      |
| -u   | 显示进程的所属用户 |

### 3.案例实操

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-12-02%2F286668d5bd0307fda2660e4c97539e5b--245b--image-20231202162648783.png" alt="image-20231202162648783" style="zoom:80%;" />

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-12-02%2F2985665c1343a8df460f18e29fd8cca9--7c29--image-20231202163245537.png" alt="image-20231202163245537" style="zoom:80%;" />

## （4）top实时监控监控系统进程状态

### 1.基本命令

```shell
top [选项];
```

### 2.选项说明

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-12-02%2Fe9063a545c40604c8f541aadd64f2b39--d5fa--image-20231202163448354.png" alt="image-20231202163448354" style="zoom:80%;" />

| 操作 | 功能                          |
| ---- | ----------------------------- |
| P    | 以CPU使用率排序，默认就是此项 |
| M    | 以内存的使用率排序            |
| N    | 以PID排序                     |
| q    | 退出top                       |

### 3.案例实操

![image-20231202165132526](https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-12-02%2F75eae3eea1d75442040a4df8f611a3e4--5057--image-20231202165132526.png)

`load average`代表过去的一分钟、五分钟、十五分钟的平均负载。

`us`代表用户进程时间占比，`sy`代表系统进程时间占比，`ni`代表`nice`进程占比（`nice`命令给当前进程一个友善度，友善度越高，优先级越低），`id`代表空闲时间占比，`wa`代表等待时间占比（等待IO操作），`hi`代表硬中断时间占比，`si`代表软中断时间占比，`st`代表被虚拟机偷掉的时间的占比。

`buff/cache`代表缓存。

`PR`代表该进程的优先级，`NI`代表用户指定的`nice`值，`VIRT`代表虚拟内存占用的大小，`RES`代表实际内存（物理内存）占用的大小，`SHR`代表共享内存（该进程把一些内容放在共享内存里，其他进程也可以去用），`S`代表当前的状态，`TIME+`指的是当前运行的时间已经占用 CPU 的总时间的量（+代表精确到秒后边的两个百分位），`COMMAND`代表生成当前进程的命令。

在top界面，按下[u]可以指定要监视的用户，按下[k]，可以指定要终止的进程，然后输入相应的信号（类似kill）。

## （5）netstat显示网络



### 1.基本语法

```
netstat -anp | grep 进程号 （功能描述：查看该进程网络信息）
netstat -nlp | grep 端口号 （功能描述：查看网络端口号占用情况）
```

### 2.选项说明

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-12-07%2Fdcc06709e9507001606892f08416843d--d4cb--image-20231207105547524.png" alt="image-20231207105547524" style="zoom:80%;" />

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-12-07%2F301d99bda845337c158048cff5357dc4--7585--image-20231207110348100.png" alt="image-20231207110348100" style="zoom:80%;" />

用`hostname`或者`ip`来确定主机，端口作为数据传输的通道。每一个进程占据一个数据通道，这个门就是端口号，以便于不同的进程进行数据传输。一个端口被一个进程占据，另一个进程便不可以使用那个端口，如果使用就会报错

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-12-07%2Fcf00a842039e0047f17173e61cd68e07--5aaf--image-20231207110502255.png" alt="image-20231207110502255" style="zoom:80%;" />

Socket就是：

```
ip(或主机名):端口号
```

监听就是查看是否有数据是否有数据传输。

### 3.案例实操

输入`netstat -anp | less`：

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-12-07%2Fe04b2c458bdddc9f26f8fd7938fc01dc--a941--image-20231207112012437.png" alt="image-20231207112012437" style="zoom:80%;" />

其中,`Proto`是网络协议，`Recv-Q`代表已经连接到当前`Socket`的用户程序，还没有拷贝出来的字节，、；`Send-Q`代表已经发出，但远程主机没有收到的字节数，有可能被丢掉、需要重新传输。`Local Address`代表本地地址，`Foreign Adress`代表远程地址，以Socket形式显示。`State`代表当前网络连接的状态。最后是进程号与进程名。

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-12-07%2Fcac3ac80afe3857b1d6d01dc0e2f7703--ff79--image-20231207113957892.png" alt="image-20231207113957892" style="zoom:80%;" />

对于同一个主机来说它的同一个进程只能占用同一个端口，可以像上图一样有两个其他主机的不同进程来来连接同一个端口。

# 十一、crontab系统定时任务

## （1）重新启动crontab服务



<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-12-07%2Fa23f496ce550931bc94c00533224f813--291c--image-20231207114424829.png" alt="image-20231207114424829" style="zoom:80%;" />

## （2）crontab定时任务设置

### 1.基本语法

```
crontab [选项]
```

### 2.选项说明

-<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-12-07%2F2ae00d863694e4c4be4de44f0e2cedc2--33f4--image-20231207114559984.png" alt="image-20231207114559984" style="zoom:80%;" />

### 3.参数说明

```
crontab -e
```

1. 进入crontab编辑界面。会打开vim编辑你的工作。

`*****`执行的任务

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-12-07%2F3b06a9224b6d76375617c06a00f08457--03ee--image-20231207114956298.png" alt="image-20231207114956298" style="zoom:80%;" />

2. 特殊符号

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-12-07%2F187908b7db11e087c390a77a0c86c684--5be7--image-20231207125721180.png" alt="image-20231207125721180" style="zoom:80%;" />

3. 特定时间执行命令

<img src="https://leafalice-image.oss-cn-hangzhou.aliyuncs.com/img/2023-12-07%2F498481c57e18f8dd231e099390384b0f--18c7--image-20231207125802227.png" alt="image-20231207125802227" style="zoom:80%;" />
